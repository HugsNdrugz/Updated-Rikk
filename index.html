<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>My Nigga Rikk - Street Hustle</title>
    <!-- Main Game Styles -->
    <link rel="stylesheet" href="style.css">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Lato'>
    <!-- NEW: Slot Game i -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Permanent+Marker&family=Roboto:ital,wght@1,300&display=swap">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">
</head>

<body>
    <div id="game-viewport" class="app-root">
        <!-- Splash Screen -->
        <section id="splash-screen" class="screen active" aria-label="Loading Game">
            <div class="content-wrapper">
                
                <p class="outfit-splash-tagline">Loading the Hustle...</p>
                <div class="loader"></div>
            </div>
        </section>
        
        <!-- Start Screen (Main Menu) -->
        <section id="start-screen" class="screen overlay-screen" aria-labelledby="start-screen-title">
    <div id="main-menu-content">
                <h1 id="start-screen-title">My Nigga Rikk</h1>
        <div id="primary-actions">
                    <button id="new-game-btn" class="game-button primary-action">Hit the Streets!</button>
                    <button id="continue-game-btn" class="game-button secondary-action hidden">Continue Hustle</button>
                </div>
        <nav id="submenu-navigation">
            <button id="settings-menu-btn" class="game-button submenu-button">Settings</button>
            <button id="load-menu-btn" class="game-button submenu-button">Load Game</button>
            <button id="credits-menu-btn" class="game-button submenu-button">Credits</button>
            <!-- Optional: <button id="how-to-play-menu-btn" class="game-button submenu-button">How to Play</button> -->
        </nav>
        <!-- Placeholder for Sub-menu panels/content that will be revealed by JS -->
        <div id="settings-menu-panel" class="submenu-panel hidden">
    <h2>Settings</h2>
    <div class="settings-controls-container">

        <fieldset class="settings-group">
            <legend>Colors</legend>

            <div class="setting-control">
                <label for="setting-color-dark-bg">Main Background:</label>
                <input type="color" id="setting-color-dark-bg" data-variable="--color-dark-bg">
            </div>
            <div class="setting-control">
                <label for="setting-color-surface">Surface Color:</label>
                <input type="color" id="setting-color-surface" data-variable="--color-surface">
            </div>
            <div class="setting-control">
                <label for="setting-color-primary">Primary Accent:</label>
                <input type="color" id="setting-color-primary" data-variable="--color-primary">
            </div>
            <div class="setting-control">
                <label for="setting-color-secondary">Secondary Accent:</label>
                <input type="color" id="setting-color-secondary" data-variable="--color-secondary">
            </div>
            <div class="setting-control">
                <label for="setting-color-on-surface">Text on Surface:</label>
                <input type="color" id="setting-color-on-surface" data-variable="--color-on-surface">
            </div>
            <div class="setting-control">
                <label for="setting-color-on-primary">Text on Primary:</label>
                <input type="color" id="setting-color-on-primary" data-variable="--color-on-primary">
            </div>
             <div class="setting-control">
                <label for="setting-color-accent-gold">Gold Accent:</label>
                <input type="color" id="setting-color-accent-gold" data-variable="--color-accent-gold">
            </div>
            <div class="setting-control">
                <label for="setting-color-error">Error/Danger Color:</label>
                <input type="color" id="setting-color-error" data-variable="--color-error">
            </div>
            <div class="setting-control">
                <label for="setting-color-success-green">Success Color:</label>
                <input type="color" id="setting-color-success-green" data-variable="--color-success-green">
            </div>
        </fieldset>

        <fieldset class="settings-group">
            <legend>Fonts</legend>
            <div class="setting-control">
                <label for="setting-font-body">Body Font:</label>
                <select id="setting-font-body" data-variable="--font-body">
                    <option value="'Roboto', 'Open Sans', sans-serif">Roboto (Default)</option>
                    <option value="'Lato', sans-serif">Lato</option>
                    <option value="'Arial', sans-serif">Arial</option>
                    <option value="'Verdana', sans-serif">Verdana</option>
                </select>
            </div>
            <div class="setting-control">
                <label for="setting-font-display">Display Font:</label>
                <select id="setting-font-display" data-variable="--font-display">
                    <option value="'Press Start 2P', 'Comic Neue', cursive">Press Start 2P (Default)</option>
                    <option value="'Black Ops One', sans-serif">Black Ops One</option>
                    <option value="'Impact', fantasy">Impact</option>
                    <option value="'Courier New', monospace">Courier New</option>
                </select>
            </div>
        </fieldset>

        <fieldset class="settings-group">
            <legend>Layout & Dimensions</legend>
            <div class="setting-control">
                <label for="setting-viewport-border-radius">Viewport Radius (<span class="value-display" data-target="setting-viewport-border-radius">0</span>px):</label>
                <input type="range" id="setting-viewport-border-radius" data-variable="--viewport-border-radius" min="0" max="30" step="1">
            </div>
            <div class="setting-control">
                <label for="setting-phone-border-radius">Phone Radius (<span class="value-display" data-target="setting-phone-border-radius">0</span>px):</label>
                <input type="range" id="setting-phone-border-radius" data-variable="--phone-border-radius" min="0" max="40" step="1">
            </div>
            <div class="setting-control">
                <label for="setting-modal-border-radius">Modal Radius (<span class="value-display" data-target="setting-modal-border-radius">0</span>px):</label>
                <input type="range" id="setting-modal-border-radius" data-variable="--modal-border-radius" min="0" max="20" step="1">
            </div>
            <div class="setting-control">
                <label for="setting-button-border-radius">Button Radius (<span class="value-display" data-target="setting-button-border-radius">0</span>px):</label>
                <input type="range" id="setting-button-border-radius" data-variable="--button-border-radius" min="0" max="20" step="1">
            </div>
            <div class="setting-control">
                <label for="setting-spacing-unit">Base Spacing (<span class="value-display" data-target="setting-spacing-unit">0</span>px):</label>
                <input type="range" id="setting-spacing-unit" data-variable="--spacing-unit" min="4" max="12" step="1">
            </div>
        </fieldset>

    </div>
    <!-- Specific settings controls will be added in later steps -->
    <button class="submenu-back-btn" data-targetpanel="settings-menu-panel">Back</button>
</div>
        <div id="load-menu-panel" class="submenu-panel hidden">
    <h2>Load Game</h2>
    <p>Saved game slots will appear here.</p>
    <!-- Load game functionality will be detailed if necessary -->
    <button class="submenu-back-btn" data-targetpanel="load-menu-panel">Back</button>
</div>
        <div id="credits-menu-panel" class="submenu-panel hidden">
    <h2>Credits</h2>
    <p>Game developed by: Your Name/Studio</p>
    <p>Assets from: Asset Store Links/Credits</p>
    <!-- More detailed credits can be added later -->
    <button class="submenu-back-btn" data-targetpanel="credits-menu-panel">Back</button>
</div>
        <!-- <div id="how-to-play-menu-panel" class="submenu-panel hidden"></div> -->
            </div>
        </section>
        
        <!-- Game Screen -->
        <main id="game-screen" class="screen" role="main" aria-label="Main Game Area">
            <header id="top-hud" class="hud">
                <div class="hud-item stat-cash">
                    <span class="hud-icon" aria-hidden="true">üí∞</span>
                    <span class="hud-label">Stash:</span> $<span id="cash-display" class="hud-value">0</span>
                </div>
                <div class="hud-item stat-fiends">
                    <span class="hud-icon" aria-hidden="true">üóìÔ∏è</span>
                    <span class="hud-label">Fiends Left:</span> <span id="day-display" class="hud-value">10</span>
                </div>
                <div class="hud-item stat-heat">
                    <span class="hud-icon" aria-hidden="true">üî•</span>
                    <span class="hud-label">Heat:</span> <span id="heat-display" class="hud-value">0</span>
                </div>
                <div class="hud-item stat-cred">
                    <span class="hud-icon" aria-hidden="true">üèÜ</span>
                    <span class="hud-label">Cred:</span> <span id="cred-display" class="hud-value">0</span>
                </div>
            </header>
            
            <div id="event-ticker-container">
                <p id="event-ticker">Word on the street: All quiet... for now.</p>
            </div>
            
            <div id="game-scene">
                <div id="knock-effect" class="hidden" aria-live="assertive">KNOCK! KNOCK!</div>
                
                <!-- Rikk's Phone -->
                <aside id="rikk-phone-ui" class="phone-container" role="complementary" aria-label="Customer Interaction Terminal">
                    <div class="volume-btn"></div>
                    <div class="power-btn"></div>
                    
                    <div id="phone-screen-area" class="phone-screen-area">
                        <div class="wallpaper"></div>
                        <div class="notch"><div class="camera"></div><div class="speaker"></div></div>
                        
                        <div class="status-bar">
                            <div id="current-time-small">12:34</div>
                            <div class="status-icons">
                                <i class="fas fa-signal"></i>
                                <i class="fas fa-wifi"></i>
                                <i class="fas fa-battery-three-quarters"></i>
                            </div>
                        </div>

                        <!-- Phone Content Layers -->
                        <div id="android-home-screen" class="phone-content-view">
                            <div class="time-display" id="current-time">00:00</div>
                            <div class="date-display" id="current-date">Monday, January 1</div>
                            <div class="notification" id="notification">
                                <div class="notification-title">Notification</div>
                                <div class="notification-content">System Message</div>
                            </div>
                            <div class="app-grid">
                                <div class="app-icon" data-action="messages"><i class="fas fa-comment-dots"></i><div class="app-label">Messages</div></div>
                                <div class="app-icon" data-action="inventory-app"><i class="fas fa-briefcase"></i><div class="app-label">Inventory</div></div>
                                <div class="app-icon" data-action="contacts-app"><i class="fas fa-address-book"></i><div class="app-label">Contacts</div></div>
                                <div class="app-icon" data-action="slot-game"><i class="fas fa-dice-five"></i><div class="app-label">Slots</div></div>
                                <div class="app-icon" data-action="music"><i class="fas fa-music"></i><div class="app-label">Music</div></div>
                                <div class="app-icon" data-action="clock"><i class="fas fa-clock"></i><div class="app-label">Clock</div></div>
                                <div class="app-icon" data-action="theme-settings"><i class="fas fa-palette"></i><div class="app-label">Theme</div></div>
                            </div>
                        </div>

                        <div id="game-chat-view" class="phone-content-view hidden mockchat">
                             <header class="phone-header">
                                <button class="phone-back-button hidden" data-action="back-to-home"><i class="fas fa-chevron-left"></i></button>
                                <h3 id="phone-title-game">Street Talk</h3>
                            </header>
                            <div id="chat-container-game" class="phone-chat-body" role="log" aria-live="polite"></div>
                            <footer id="choices-area-game" class="phone-footer-choices" role="toolbar"></footer>
                        </div>
                        
                        <div id="contacts-app-view" class="phone-content-view hidden">
                            <!-- The ContactsAppManager will render its UI content here -->
                        </div>

                        <!-- NEW: Container for the Slot Game App -->
                        <div id="slot-game-view" class="phone-content-view hidden">
                             <header class="phone-header">
                                <button class="phone-back-button" data-action="back-to-home"><i class="fas fa-chevron-left"></i></button>
                                <h3 id="phone-title-slot-game">Slots</h3>
                            </header>
                            <!-- Slot Game HTML structure injected here -->
                            <div class="game-container">
                                <div class="winner-display mb-3">
                                  <span>WIN: <span id="win-amount">$0</span></span>
                                </div>
                                <canvas id="slot" width="440" height="240"></canvas>
                                <div class="controls d-flex align-items-end px-1 mt-3">
                                  <div class="text-warning left d-flex flex-column align-items-start justify-content-between h-100">
                                    <span>Credit: <span id="credits" class="credit text-white">$0</span></span>
                                    <span>Bet: <span id="bet" class="bet text-white">$0</span></span>
                                  </div>
                                  <div class="mx-4 middle d-flex align-items-end justify-content-between">
                                    <button id="minus-bet" class="bet-action-btn"><i class="fas fa-minus"></i></button>
                                    <button class="align-items-center d-flex gap-2" id="spin-manual"><i class="fas fa-sync-alt"></i><b>SPIN</b></button>
                                    <button id="plus-bet" class="bet-action-btn"><i class="fas fa-plus"></i></button>
                                  </div>
                                  <div class="right d-flex flex-column align-items-end justify-content-between gap-1">
                                    <button class="align-items-center d-flex gap-1" id="pay-table" data-bs-toggle="modal" data-bs-target="#pay-table-modal"><i class="fas fa-table"></i><b>Pay Table</b></button>
                                    <button class="align-items-center control-btn d-flex gap-1" id="spin-auto"><i class="fas fa-play"></i><b>AUTO | OFF</b></button>
                                  </div>
                                </div>
                            </div>
                            <div class="modal fade modal-fullscreen-sm-down modal-lg" id="pay-table-modal">
                                <div class="modal-dialog modal-dialog-centered">
                                  <div class="modal-content">
                                    <div class="modal-header"><h5 class="modal-title">Pay Table</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div>
                                    <div class="modal-body"></div>
                                  </div>
                                </div>
                            </div>
                        </div>

                        <div id="phone-theme-settings-view" class="phone-content-view hidden">
                            <header class="phone-header">
                                <button class="phone-back-button" data-action="back-to-home"><i class="fas fa-chevron-left"></i></button>
                                <h3 id="phone-title-theme-settings">Theme Settings</h3>
                            </header>
                            <div class="settings-controls-container" id="phone-theme-controls-container">
                                <p>Loading theme settings...</p>
                            </div>
                        </div>

                        <div class="dock">
                            <div class="dock-icon" data-action="phone"><i class="fas fa-phone"></i></div>
                            <div class="dock-icon" data-action="messages"><i class="fas fa-comment"></i></div>
                            <div class="dock-icon" data-action="user"><i class="fas fa-user"></i></div>
                            <div class="dock-icon" data-action="compass"><i class="fas fa-compass"></i></div>
                        </div>
                        
                        <div class="home-indicator"></div>

                        <button id="dock-phone-btn" aria-label="Dock Phone"><i class="fas fa-arrow-down"></i></button>
                    </div>
                </aside>

                <div id="phone-docked-indicator" class="hidden">
                    <i class="fas fa-mobile-alt"></i>
                </div>
            </div>
            
            <nav id="player-hub" class="player-controls" role="navigation" aria-label="Player Actions">
                <button id="open-inventory-btn" class="hub-button inventory-toggle">
                    <img src="assets/icons/backpack-icon.svg" alt="" class="button-icon" aria-hidden="true" />
                    <span>Stash (<span id="inventory-count-display">0</span>)</span>
                </button>
                <button id="next-customer-btn" class="hub-button main-action next-turn" disabled>
                    <img src="assets/icons/next-icon.svg" alt="" class="button-icon" aria-hidden="true" />
                    <span>Next Fiend</span>
                </button>
            </nav>
        </main>
        
        <!-- End Screen -->
        <section id="end-screen" class="screen overlay-screen" aria-labelledby="end-screen-title">
            <div class="screen-content">
                <h2 id="end-screen-title">The Night's Over!</h2>
                <div class="final-stats">
                    <p>You hustled for <span id="final-days-display" class="stat-value"></span> fiends.</p>
                    <p>Final Stash: $<span id="final-cash-display" class="stat-value"></span></p>
                    <p>Final Street Cred: <span id="final-cred-display" class="stat-value"></span></p>
                </div>
                <p id="final-verdict-text" class="final-verdict"></p>
                <button id="restart-game-btn" class="game-button primary-action">Run it Back</button>
            </div>
        </section>
        
        <!-- Inventory Modal -->
        <div id="inventory-modal" class="modal-overlay" aria-hidden="true">
            <div id="inventory-dialog" class="modal-content" role="dialog" aria-modal="true" aria-labelledby="inventory-modal-title">
                <header class="modal-header">
                    <h2 id="inventory-modal-title">Your Stash</h2>
                    <button class="close-modal-btn" aria-label="Close Stash"><span aria-hidden="true">√ó</span></button>
                </header>
                <div class="modal-body"><div id="inventory-list" class="inventory-grid"></div></div>
                <footer class="modal-footer"><p class="inventory-capacity">Capacity: <span id="modal-inventory-slots-display">0/0</span></p></footer>
            </div>
        </div>
    </div>
    
    <!-- Audio Elements -->
    <audio id="door-knock-sound" src="assets/audio/door-knock.mp3" preload="auto"></audio>
    <audio id="cash-sound" src="assets/audio/cash-register.mp3" preload="auto"></audio>
    <audio id="denied-sound" src="assets/audio/denied.mp3" preload="auto"></audio>
    <audio id="chat-bubble-sound" src="assets/audio/chat-pop.mp3" preload="auto"></audio>
    
    <!-- NEW: Slot Game Dependencies (Scripts) -->
    <script src="https://unpkg.com/@tweenjs/tween.js@23.1.3/dist/tween.umd.js"></script>
    <script src="https://unpkg.com/@n1md7/html-table-builder@1.0.1/dist/table_builder.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- SCRIPT LOADING ORDER -->
    <script src="data/data_items.js" type="module"></script>
    <script src="data/customer_templates.js" type="module"></script>
    <script src="data/data_events.js" type="module"></script>
    <script src="./classes/CustomerManager.js" type="module"></script>
    <script src="./classes/ContactsAppManager.js" type="module"></script>
    <script src="./classes/SlotGameManager.js" type="module"></script>
    <script src="phone_ambient_ui.js" type="module"></script>
    <script src="script.js" type="module"></script>
</body>

</html>